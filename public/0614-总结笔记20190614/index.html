<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="baidu-site-verification" content="vvVgSQUzPU" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="keywords" content="Utone,博客,个人,utone" />
    <meta name="description" content="Utone|博客|个人|utones" />
    <title>Utone</title>
    <link rel="stylesheet" href="/style/style.css"> <link rel="stylesheet" href="/style/viewer.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.3.6/viewer.min.css"
    />
  </head>

  <body>
    <div class="head">
      
      <a href="/">
        Home
      </a>
      
      <a href="/archives">
        Archives
      </a>
      
      <a href="/about">
        About
      </a>
      
    </div>
    <div id="container">
      <div id="main">
        <div class="navbar">
          <div class="toggle">
            <i class="icon-align-right"></i>
          </div>
          <div class="search">
            <div class="input-warp">
              <i class="icon-search"></i>
              <input type="text" name="" id="" placeholder="Search Keys" />
            </div>
          </div>
        </div>
        <div class="content">
          <article class="post-entry">
    <div class="header">
      <div class="title">总结笔记20190614</div>
      <div class="date">
        <i class="icon-calendar"></i>
        2019/06/14
      </div>
    </div>
    <ol>
<li>解决 chrome network 中出现<code>provisional headers are shown</code>，导致跨域时，查看不了 cookie 的携带情况<ul>
<li>解决方法<a href="https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger" target="_blank" rel="noopener">https://stackoverflow.com/questions/21177387/caution-provisional-headers-are-shown-in-chrome-debugger</a></li>
<li>chrome://flags/</li>
<li>Disable site isolation</li>
<li>Enable network service</li>
<li>Runs network service in-process</li>
</ul>
</li>
<li>less 的函数 data-uri，可以将图片编译成 base64 格式，图片过大时，不生效，最大尺寸为 24KB</li>
<li>devDependencies 和 dependencies 区别<ul>
<li>网上统一的观念是</li>
<li>devDependencies 用于本地环境开发时候。 dependencies 用户发布环境 其实看名字我也知道是这个意思，我觉得没解释情况。 devDependencies 是只会在开发环境下依赖的模块，生产环境不会被打入包内。通过 NODE_ENV=developement 或 NODE_ENV=production 指定开发还是生产环境。 而 dependencies 依赖的包不仅开发环境能使用，生产环境也能使用。其实这句话是重点，按照这个观念很容易决定安装模块时是使用–save 还是–save-dev。</li>
</ul>
</li>
<li>关于 cookie 携带问题<ul>
<li>cookie 携带：这个问题与你发起 ajax 请求的方式有关</li>
<li>fetch 在默认情况下, 不管是同域还是跨域 ajax 请求都不会带上 cookie, 只有当设置了 credentials 时才会带上该 ajax 请求所在域的 cookie, 服务端需要设置响应头 Access-Control-Allow-Credentials: true, 否则浏览器会因为安全限制而报错, 拿不到响应</li>
<li>axios 和 jQuery 在同域 ajax 请求时会带上 cookie, 跨域请求不会, 跨域请求需要设置 withCredentials 和服务端响应头</li>
<li>默认情况下，一般浏览器的 CORS 跨域请求都是不会发送 cookie 等认证信息到服务端的，除非指定了 xhr.withCredentials = true，但是只有客户端单方面的设置了这个值还不行，服务端也需要同意才可以，所以服务端也需要设置好返回头 Access-Control-Allow-Credentials: true；还有一点要注意的，返回头 Access-Control-Allow-Origin 的值不能为星号，必须是指定的域，否则 cookie 等认证信息也是发送不了。</li>
</ul>
</li>
<li><code>process.argv</code>属性返回一个数组，这个数组包含了启动 Node.js 进程时的命令行参数。第一个元素为 process.execPath。如果需要获取 argv[0]的值请参见 node 文档的 process.argv0。第二个元素为当前执行的 JavaScript 文件路径。剩余的元素为其他命令行参数。</li>
<li><p>CORS 的相关设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: * // 跨域时，如果客户端ajax设置了withCredentials: true，就不可以为通配符，否则浏览器还是会跨域拦截</span><br><span class="line">Access-Control-Allow-Credentials: true // 表示客户端是否可以发送Cookie</span><br><span class="line">Access-Control-Expose-Headers: FooBar</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ajax set 跨域携带证书</span></span><br><span class="line">xhrFields: &#123;</span><br><span class="line">  withCredentials: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断是否为对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(x) === <span class="string">"[object Object]"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>(1,eval)(“str”) 等价于 (eval)(‘str’) =&gt; eval(‘str’)</p>
</li>
<li><code>(1,2,3,4) === 4 // true</code></li>
<li>易混淆的判断真假<ul>
<li>0 判断为 false</li>
<li>“0” 判断为 true</li>
<li>“” 判断为 false</li>
<li>“null” 判断为 true</li>
</ul>
</li>
<li>Promise 相关写法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(value)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(value))</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.reject(<span class="string">"err"</span>)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject(<span class="string">"err"</span>))</span><br></pre></td></tr></table></figure>
<ol start="12">
<li><p>pm2 常用命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ pm2 logs 显示所有进程日志</span><br><span class="line">$ pm2 stop all 停止所有进程</span><br><span class="line">$ pm2 restart all 重启所有进程</span><br><span class="line">$ pm2 reload all 0秒停机重载进程 (用于 NETWORKED 进程)</span><br><span class="line">$ pm2 stop 0 停止指定的进程</span><br><span class="line">$ pm2 restart 0 重启指定的进程</span><br><span class="line">$ pm2 startup 产生 init 脚本 保持进程活着</span><br><span class="line">$ pm2 web 运行健壮的 computer API endpoint (http://localhost:9615)</span><br><span class="line">$ pm2 delete 0 杀死指定的进程</span><br><span class="line">$ pm2 delete all 杀死全部进程</span><br><span class="line"></span><br><span class="line">运行进程的不同方式：</span><br><span class="line">$ pm2 start app.js -i max 根据有效CPU数目启动最大进程数目</span><br><span class="line">$ pm2 start app.js -i 3 启动3个进程</span><br><span class="line">$ pm2 start app.js -x 用fork模式启动 app.js 而不是使用 cluster</span><br><span class="line">$ pm2 start app.js -x -- -a 23 用fork模式启动 app.js 并且传递参数 (-a 23)</span><br><span class="line">$ pm2 start app.js --name serverone 启动一个进程并把它命名为 serverone</span><br><span class="line">$ pm2 stop serverone 停止 serverone 进程</span><br><span class="line">$ pm2 start app.json 启动进程, 在 app.json里设置选项</span><br><span class="line">$ pm2 start app.js -i max -- -a 23 在--之后给 app.js 传递参数</span><br><span class="line">$ pm2 start app.js -i max -e err.log -o out.log 启动 并 生成一个配置文件</span><br></pre></td></tr></table></figure>
</li>
<li><p>pm2 启动文件</p>
<ul>
<li>apps:json 结构，apps 是一个数组，每一个数组成员就是对应一个 pm2 中运行的应用</li>
<li>name:应用程序名称</li>
<li>cwd:应用程序所在的目录</li>
<li>script:应用程序的脚本路径</li>
<li>log_date_format:</li>
<li>error_file:自定义应用程序的错误日志文件</li>
<li>out_file:自定义应用程序日志文件</li>
<li>pid_file:自定义应用程序的 pid 文件</li>
<li>instances:</li>
<li>min_uptime:最小运行时间，这里设置的是 60s 即如果应用程序在 60s 内退出，pm2 会认为程- 序异常退出，此时触发重启 max_restarts 设置数量</li>
<li>max_restarts:设置应用程序异常退出重启的次数，默认 15 次（从 0 开始计数）</li>
<li>cron_restart:定时启动，解决重启能解决的问题</li>
<li>watch:是否启用监控模式，默认是 false。如果设置成 true，当应用程序变动时，pm2 会自- 动重载。这里也可以设置你要监控的文件。</li>
<li>merge_logs:</li>
<li>exec_interpreter:应用程序的脚本类型，这里使用的 shell，默认是 nodejs</li>
<li>exec_mode:应用程序启动模式，这里设置的是 cluster_mode（集群），默认是 fork</li>
<li>autorestart:启用/禁用应用程序崩溃或退出时自动重启</li>
<li>vizion:启用/禁用 vizion 特性(版本控制)</li>
</ul>
</li>
<li><p>onpagehide,onunload,onpageshow,onload</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// onpageshow 事件类似于 onload 事件，onload 事件在页面第一次加载时触发， onpageshow</span><br><span class="line">// 事件在每次加载页面时触发，即 onload 事件在页面从浏览器缓存中读取时不触发</span><br><span class="line">event.persisted 判断页面是否从缓存中加载</span><br></pre></td></tr></table></figure>
<ol start="15">
<li><p>JS 模块化写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">module</span> = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span>(<span class="params">count</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.count + count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>得到一个键盘</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用字符串返回一个键盘图形</span></span><br><span class="line">;(<span class="function"><span class="params">_</span> =&gt;</span></span><br><span class="line">  [...<span class="string">"`1234567890-=~~QWERTYUIOP[]\\~ASDFGHJKL;'~~ZXCVBNM,./~"</span>].map(</span><br><span class="line">    x =&gt;</span><br><span class="line">      ((o += <span class="string">`/<span class="subst">$&#123;(b = <span class="string">"_"</span>.repeat(</span></span></span><br><span class="line"><span class="string"><span class="subst">        (w =</span></span></span><br><span class="line"><span class="string"><span class="subst">          x &lt; y</span></span></span><br><span class="line"><span class="string"><span class="subst">            ? <span class="number">2</span></span></span></span><br><span class="line"><span class="string"><span class="subst">            : <span class="string">" 667699"</span>[</span></span></span><br><span class="line"><span class="string"><span class="subst">                ((x = [<span class="string">"BS"</span>, <span class="string">"TAB"</span>, <span class="string">"CAPS"</span>, <span class="string">"ENTER"</span>][p++] || <span class="string">"SHIFT"</span>), p)</span></span></span><br><span class="line"><span class="string"><span class="subst">              ])</span></span></span><br><span class="line"><span class="string"><span class="subst">      ))&#125;</span>\\|`</span>),</span><br><span class="line">      (m += y + (x + <span class="string">"    "</span>).slice(<span class="number">0</span>, w) + y + y),</span><br><span class="line">      (n += y + b + y + y),</span><br><span class="line">      (l += <span class="string">" __"</span> + b))[<span class="number">73</span>] &amp;&amp; (k.push(l, m, n, o), (l = <span class="string">""</span>), (m = n = o = y)),</span><br><span class="line">    (m = n = o = y = <span class="string">"|"</span>),</span><br><span class="line">    (p = l = k = [])</span><br><span class="line">  ) &amp;&amp;</span><br><span class="line">  k.join<span class="string">`</span></span><br><span class="line"><span class="string">`</span>)()</span><br></pre></td></tr></table></figure>
<ol start="17">
<li><p>中文输入下 input 的 compositionstart 与 compositionend，实现仅在选词后触发 input 事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> typing = <span class="literal">false</span></span><br><span class="line">$(<span class="string">"#ipt"</span>).on(<span class="string">"compositionstart"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  typing = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">"#ipt"</span>).on(<span class="string">"compositionend"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  typing = <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//oninput在oncompositionend之前执行，需加定时器</span></span><br><span class="line">$(<span class="string">"#ipt"</span>).on(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!typing) &#123;</span><br><span class="line">      <span class="comment">//To do something...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//或用keyup代替input</span></span><br><span class="line">$(<span class="string">"#ipt"</span>).on(<span class="string">"keyup"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!typing) &#123;</span><br><span class="line">    <span class="comment">//To do something...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Navicat Premium for Mac的破解教程<br><code>https://www.jianshu.com/p/f3ef78deadaa</code></p>
</li>
</ol>

     <!--畅言PC和WAP自适应版-->
  
</article>

        </div>
      </div>
      <div id="card">
        <div class="logo-widget">
          <div class="author">
            Utone
          </div>
          <div
            class="logo"
            style="background-image: url('/images/logo.jpeg')"
          ></div>
        </div>
        <div class="locate-widget">
          <i class="icon-location"></i>
        </div>
        <div class="follow-widget">
          
          <a href="https://github.com/shixiaohu2206" target="_block"
            ><i class="icon-github "></i
          ></a>
          
          <a href="https://github.com/shixiaohu2206" target="_block"
            ><i class="icon-wechat "></i
          ></a>
          
          <a href="https://github.com/shixiaohu2206" target="_block"
            ><i class="icon-QQ "></i
          ></a>
           
          <a href="/atom.xml" target="_block"
            ><i class="icon-rss"></i
          ></a>
          
        </div>
        
        <div class="toc-widget">
          <div class="title">
            <span>Toc</span>
          </div>
          <div class="post-toc">
            
          </div>
        </div>
        
        <div class="category-widget">
          <div class="title">
            <span>Categories</span>
            <span><a href="/archives">···</a></span>
          </div>
          <div class="list">
            <ul>
               
              <li>
                <a href="/categories/Code/">
                  Code
                </a>
              </li>
                
              <li>
                <a href="/categories/代码/">
                  代码
                </a>
              </li>
                
              <li>
                <a href="/categories/Note/">
                  Note
                </a>
              </li>
                
              <li>
                <a href="/categories/Daily/">
                  Daily
                </a>
              </li>
                
              <li>
                <a href="/categories/Travel/">
                  Travel
                </a>
              </li>
                   
            </ul>
          </div>
        </div>
        <div class="tag-widget">
          <div class="title">
            <span>Tag Cloud</span>
            <span><a href="">···</a></span>
          </div>
          <div class="tag-cloud">
            <a href="/tags/Css/" style="font-size: 13px; color: #4a4a4a">Css</a> <a href="/tags/DvaJs/" style="font-size: 13px; color: #4a4a4a">DvaJs</a> <a href="/tags/ES6/" style="font-size: 13px; color: #4a4a4a">ES6</a> <a href="/tags/Eslint/" style="font-size: 13px; color: #4a4a4a">Eslint</a> <a href="/tags/Float/" style="font-size: 13px; color: #4a4a4a">Float</a> <a href="/tags/Git/" style="font-size: 15.33px; color: #4a4a4a">Git</a> <a href="/tags/JavaScript/" style="font-size: 20px; color: #4a4a4a">JavaScript</a> <a href="/tags/Linux/" style="font-size: 15.33px; color: #4a4a4a">Linux</a> <a href="/tags/MySql/" style="font-size: 13px; color: #4a4a4a">MySql</a> <a href="/tags/Nginx/" style="font-size: 13px; color: #4a4a4a">Nginx</a> <a href="/tags/NodeJS/" style="font-size: 13px; color: #4a4a4a">NodeJS</a> <a href="/tags/PHP/" style="font-size: 17.67px; color: #4a4a4a">PHP</a> <a href="/tags/Promise/" style="font-size: 13px; color: #4a4a4a">Promise</a> <a href="/tags/React/" style="font-size: 15.33px; color: #4a4a4a">React</a> <a href="/tags/SSH/" style="font-size: 13px; color: #4a4a4a">SSH</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<script src="https://www.tianqiapi.com/api/?version=v6&callback=weathCb"></script>
<script src="/scripts/viewer.js"></script>
<script src="/scripts/index.js"></script>
